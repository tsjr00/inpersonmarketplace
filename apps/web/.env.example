# ============================================================================
# Environment Variables — Three-Tier Configuration
# ============================================================================
#
# TIER OVERVIEW:
#   Dev        → localhost:3002   → Supabase Dev project
#   Staging    → Vercel Preview   → Supabase Staging project
#   Production → Vercel Prod      → Supabase Production project
#
# LOCAL DEVELOPMENT: Copy this file to .env.local and fill in Dev values.
# VERCEL: Set each variable in the Vercel dashboard, scoped to the correct
#         environment (Production / Preview / Development).
#
# Vercel auto-provides these (no config needed):
#   VERCEL_ENV              → "production" | "preview" | "development"
#   NEXT_PUBLIC_VERCEL_ENV  → same, available client-side
#   NEXT_PUBLIC_VERCEL_URL  → deployment URL (no protocol)
# ============================================================================

# --- Supabase ---
# Each tier points to a DIFFERENT Supabase project.
# Vercel scoping: Production → prod project, Preview → staging project
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# --- App URL ---
# Must match the domain for each tier (used for Stripe redirects, API fetches)
# Dev: http://localhost:3002
# Staging: https://your-project-git-branch.vercel.app  (or leave blank — auto-detected)
# Production: https://farmersmarketing.app
NEXT_PUBLIC_APP_URL=http://localhost:3002

# --- Stripe ---
# Use test keys for Dev & Staging, live keys for Production.
# Vercel scoping: Production → live keys, Preview → test keys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Stripe subscription price IDs (same across test/live unless you create separate products)
STRIPE_VENDOR_MONTHLY_PRICE_ID=price_xxx
STRIPE_VENDOR_ANNUAL_PRICE_ID=price_xxx
STRIPE_BUYER_MONTHLY_PRICE_ID=price_xxx
STRIPE_BUYER_ANNUAL_PRICE_ID=price_xxx

# --- Cron Jobs ---
# Secures /api/cron/* endpoints. Vercel sends this automatically for cron invocations.
# Generate a random string: openssl rand -hex 32
# IMPORTANT: Set a DIFFERENT secret per environment.
CRON_SECRET=your_cron_secret_here

# --- Notifications ---
# Email via Resend (free tier: 3,000 emails/mo)
RESEND_API_KEY=re_xxx
RESEND_FROM_EMAIL=noreply@mail.farmersmarketing.app

# SMS via Twilio (4 urgent scenarios only)
# TWILIO_ACCOUNT_SID=ACxxx
# TWILIO_AUTH_TOKEN=xxx
# TWILIO_FROM_NUMBER=+1xxx

# Web Push (VAPID keys — generate once, use everywhere)
# NEXT_PUBLIC_VAPID_PUBLIC_KEY=xxx
# VAPID_PRIVATE_KEY=xxx

# --- Local Dev Only ---
PORT=3002
