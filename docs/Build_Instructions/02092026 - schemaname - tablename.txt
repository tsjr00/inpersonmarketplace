| schemaname | tablename                | policyname                      | permissive | roles    | cmd    | qual                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | with_check                                                                                                                                                                                                                                                                                   |
| ---------- | ------------------------ | ------------------------------- | ---------- | -------- | ------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | cart_items               | cart_items_all                  | PERMISSIVE | {public} | ALL    | (cart_id IN ( SELECT carts.id
   FROM carts
  WHERE (carts.user_id = ( SELECT auth.uid() AS uid))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                         |
| public     | carts                    | carts_all                       | PERMISSIVE | {public} | ALL    | (user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                         |
| public     | fulfillments             | fulfillments_delete             | PERMISSIVE | {public} | DELETE | (transaction_id IN ( SELECT transactions.id
   FROM transactions
  WHERE (transactions.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | fulfillments             | fulfillments_insert             | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (transaction_id IN ( SELECT transactions.id
   FROM transactions
  WHERE (transactions.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                |
| public     | fulfillments             | fulfillments_select             | PERMISSIVE | {public} | SELECT | (transaction_id IN ( SELECT transactions.id
   FROM transactions
  WHERE ((transactions.buyer_user_id = ( SELECT auth.uid() AS uid)) OR (transactions.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | fulfillments             | fulfillments_update             | PERMISSIVE | {public} | UPDATE | (transaction_id IN ( SELECT transactions.id
   FROM transactions
  WHERE (transactions.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | listing_images           | listing_images_delete           | PERMISSIVE | {public} | DELETE | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | listing_images           | listing_images_insert           | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                |
| public     | listing_images           | listing_images_select           | PERMISSIVE | {public} | SELECT | ((EXISTS ( SELECT 1
   FROM listings
  WHERE ((listings.id = listing_images.listing_id) AND (listings.status = 'published'::listing_status)))) OR (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))))                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                         |
| public     | listing_images           | listing_images_update           | PERMISSIVE | {public} | UPDATE | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | listing_markets          | listing_markets_delete          | PERMISSIVE | {public} | DELETE | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | listing_markets          | listing_markets_insert          | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                |
| public     | listing_markets          | listing_markets_select          | PERMISSIVE | {public} | SELECT | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                         |
| public     | listing_markets          | listing_markets_update          | PERMISSIVE | {public} | UPDATE | (listing_id IN ( SELECT listings.id
   FROM listings
  WHERE (listings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                         |
| public     | listings                 | listings_delete                 | PERMISSIVE | {public} | DELETE | (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |
| public     | listings                 | listings_insert                 | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                        |
| public     | listings                 | listings_admin_select           | PERMISSIVE | {public} | SELECT | is_admin_for_vertical(vertical_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                         |
| public     | listings                 | listings_select                 | PERMISSIVE | {public} | SELECT | ((status = 'published'::listing_status) OR (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                         |
| public     | listings                 | listings_update                 | PERMISSIVE | {public} | UPDATE | (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |
| public     | market_box_pickups       | market_box_pickups_select       | PERMISSIVE | {public} | SELECT | can_access_subscription(subscription_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                         |
| public     | market_box_pickups       | market_box_pickups_update       | PERMISSIVE | {public} | UPDATE | can_access_subscription(subscription_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                         |
| public     | market_box_subscriptions | market_box_subscriptions_insert | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (buyer_user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                |
| public     | market_box_subscriptions | market_box_subscriptions_select | PERMISSIVE | {public} | SELECT | ((buyer_user_id = ( SELECT auth.uid() AS uid)) OR (offering_id IN ( SELECT market_box_offerings.id
   FROM market_box_offerings
  WHERE (market_box_offerings.vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |
| public     | market_schedules         | market_schedules_delete         | PERMISSIVE | {public} | DELETE | ((EXISTS ( SELECT 1
   FROM markets m
  WHERE ((m.id = market_schedules.market_id) AND (m.submitted_by_vendor_id IN ( SELECT vendor_profiles.id
           FROM vendor_profiles
          WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))))) OR can_admin_market(market_id))                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                         |
| public     | market_schedules         | market_schedules_insert         | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ((EXISTS ( SELECT 1
   FROM markets m
  WHERE ((m.id = market_schedules.market_id) AND (m.submitted_by_vendor_id IN ( SELECT vendor_profiles.id
           FROM vendor_profiles
          WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))))) OR can_admin_market(market_id)) |
| public     | market_schedules         | market_schedules_select         | PERMISSIVE | {public} | SELECT | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                         |
| public     | market_schedules         | market_schedules_update         | PERMISSIVE | {public} | UPDATE | ((EXISTS ( SELECT 1
   FROM markets m
  WHERE ((m.id = market_schedules.market_id) AND (m.submitted_by_vendor_id IN ( SELECT vendor_profiles.id
           FROM vendor_profiles
          WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))))) OR can_admin_market(market_id))                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                         |
| public     | market_vendors           | market_vendors_delete           | PERMISSIVE | {public} | DELETE | (vendor_profile_id IN ( SELECT vendor_profiles.id
   FROM vendor_profiles
  WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                         |
| public     | market_vendors           | market_vendors_insert           | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (vendor_profile_id IN ( SELECT vendor_profiles.id
   FROM vendor_profiles
  WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))                                                                                                                                                  |
| public     | market_vendors           | market_vendors_select           | PERMISSIVE | {public} | SELECT | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                         |
| public     | market_vendors           | market_vendors_update           | PERMISSIVE | {public} | UPDATE | (vendor_profile_id IN ( SELECT vendor_profiles.id
   FROM vendor_profiles
  WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                         |
| public     | markets                  | markets_delete                  | PERMISSIVE | {public} | DELETE | (submitted_by_vendor_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                         |
| public     | markets                  | markets_insert                  | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (submitted_by_vendor_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                   |
| public     | markets                  | markets_public_select           | PERMISSIVE | {public} | SELECT | (((approval_status = 'approved'::market_approval_status) AND (active = true)) OR (submitted_by_vendor_id IN ( SELECT vendor_profiles.id
   FROM vendor_profiles
  WHERE (vendor_profiles.user_id = ( SELECT auth.uid() AS uid)))) OR (id IN ( SELECT oi.market_id
   FROM (order_items oi
     JOIN orders o ON ((o.id = oi.order_id)))
  WHERE ((o.buyer_user_id = ( SELECT auth.uid() AS uid)) AND (oi.market_id IS NOT NULL)))) OR (id IN ( SELECT lm.market_id
   FROM ((listing_markets lm
     JOIN order_items oi ON ((oi.listing_id = lm.listing_id)))
     JOIN orders o ON ((o.id = oi.order_id)))
  WHERE (o.buyer_user_id = ( SELECT auth.uid() AS uid)))) OR is_platform_admin() OR is_vertical_admin(vertical_id)) | null                                                                                                                                                                                                                                                                                         |
| public     | markets                  | markets_select                  | PERMISSIVE | {public} | SELECT | (((approval_status = 'approved'::market_approval_status) AND (active = true)) OR (submitted_by_vendor_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                         |
| public     | markets                  | markets_update                  | PERMISSIVE | {public} | UPDATE | (submitted_by_vendor_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                         |
| public     | notifications            | notifications_admin_select      | PERMISSIVE | {public} | SELECT | is_platform_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                         |
| public     | notifications            | notifications_select            | PERMISSIVE | {public} | SELECT | (user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                         |
| public     | notifications            | notifications_update            | PERMISSIVE | {public} | UPDATE | (user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                         |
| public     | order_items              | order_items_insert              | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (order_id IN ( SELECT user_buyer_order_ids() AS user_buyer_order_ids))                                                                                                                                                                                                                       |
| public     | order_items              | order_items_admin_select        | PERMISSIVE | {public} | SELECT | can_admin_order(order_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                         |
| public     | order_items              | order_items_select              | PERMISSIVE | {public} | SELECT | ((order_id IN ( SELECT user_buyer_order_ids() AS user_buyer_order_ids)) OR (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                         |
| public     | order_items              | order_items_update              | PERMISSIVE | {public} | UPDATE | ((vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)) OR (order_id IN ( SELECT user_buyer_order_ids() AS user_buyer_order_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                         |
| public     | orders                   | orders_insert                   | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (buyer_user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                |
| public     | orders                   | orders_admin_select             | PERMISSIVE | {public} | SELECT | is_admin_for_vertical(vertical_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                         |
| public     | orders                   | orders_select                   | PERMISSIVE | {public} | SELECT | ((buyer_user_id = ( SELECT auth.uid() AS uid)) OR (id IN ( SELECT user_vendor_order_ids() AS user_vendor_order_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |
| public     | orders                   | orders_update                   | PERMISSIVE | {public} | UPDATE | ((buyer_user_id = ( SELECT auth.uid() AS uid)) OR (id IN ( SELECT user_vendor_order_ids() AS user_vendor_order_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |
| public     | organizations            | organizations_insert            | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (owner_user_id IN ( SELECT user_profiles.id
   FROM user_profiles
  WHERE (user_profiles.user_id = ( SELECT auth.uid() AS uid))))                                                                                                                                                            |
| public     | organizations            | organizations_select            | PERMISSIVE | {public} | SELECT | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                         |
| public     | organizations            | organizations_update            | PERMISSIVE | {public} | UPDATE | ((owner_user_id IN ( SELECT user_profiles.id
   FROM user_profiles
  WHERE (user_profiles.user_id = ( SELECT auth.uid() AS uid)))) OR is_platform_admin())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                         |
| public     | transactions             | transactions_insert             | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | (buyer_user_id = ( SELECT auth.uid() AS uid))                                                                                                                                                                                                                                                |
| public     | transactions             | transactions_admin_select       | PERMISSIVE | {public} | SELECT | is_admin_for_vertical(vertical_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                         |
| public     | transactions             | transactions_select             | PERMISSIVE | {public} | SELECT | ((buyer_user_id = ( SELECT auth.uid() AS uid)) OR (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                         |
| public     | transactions             | transactions_update             | PERMISSIVE | {public} | UPDATE | ((buyer_user_id = ( SELECT auth.uid() AS uid)) OR (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids)))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                         |
| public     | vendor_payouts           | vendor_payouts_admin_select     | PERMISSIVE | {public} | SELECT | can_admin_vendor(vendor_profile_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                         |
| public     | vendor_payouts           | vendor_payouts_select           | PERMISSIVE | {public} | SELECT | (vendor_profile_id IN ( SELECT user_vendor_profile_ids() AS user_vendor_profile_ids))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                         |